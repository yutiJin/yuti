---
title: 自动化测试移动端Monkeytest
date: 2019-03-02 10:51:12
categories: 
- Monkey
tags: 
- 自动化测试
- work
---

### 1、Sdk环境搭建

这个很简单，主要是我之前讲了很多，这里就不赘述了。[SDK](https://pan.baidu.com/s/1SvuzZm4m1YMgi2bpCgbQLQ)(m2w9)，下载解压即可使用。

### 2、设备连接

检查手机是否连接成功，很重要哦，如果设备都没连接上，那其他都是白搭。

```
adb devices
```

### 3、monkey测试命令

```
adb shell monkey -p appPackage -v 5000 > text.txt
```

查询方式：<small>  (adb shell & dumpsys window windows | grep -i current)</small>

想知道appPackage是什么的，请看[RobotFramework+Appium](https://yuti.site/2019/02/22/RF-Appium/)的环境搭建这篇文章

### 4、参数

是不是觉得很简单，下面我们来仔细分析一下不同参数具体代表什么：

|       参数       | 说明                                                         |
| :--------------: | :----------------------------------------------------------- |
|        -p        | 用此参数指定一个或多个包，不指定包则会启动设备中的所有App    |
|        -v        | 用来指定log日志的详细程度，分三个级别                        |
|        -s        | 用于指定伪随机数生成器的seed值，如果seed相同，则两次monkey测试所产生的时间序列也是相同的 |
|    --throttle    | 用于指定用户操作间的延迟，单位为毫秒                         |
| --ignore-crashes | 用于指定当应用程序奔溃时（force&close错误），monkey是否停止运行 |

补充日志级别：

| 日志级别 | 说明                                                         |
| :------: | ------------------------------------------------------------ |
|  Level0  | 仅提供启动提示、测试完成、测试结果等少量信息  -v             |
|  Level1  | 提供较为详细的日志，包括每个发送到activity的事件信息  -v -v  |
|  Level2  | 最为详细的日志，包括了测试中选中或未选中的activity信息  -v -v -v |

### 5、测试结果分析

可对text.txt进行如下分析：

|     bug类别     | 说明                                                         |
| :-------------: | ------------------------------------------------------------ |
| Monkey finished | 表示测试过程中没有异常，测试通过                             |
|      CRASH      | 表示测试时程序出现崩溃异常，测试不通过（在测试中这属于致命的bug，很值钱呢） |
|       ANR       | 表示测试过程中程序对象出现无响应的现象，测试不通过           |
|    Exception    | 表示测试过程中出现的其他小问题                               |



> 周四开会，老板要求我们要对APP进行Monkey测试，老板说，没问题吧，那，肯定没问题，不能做也能做啊。。。



### 参考

👇下面这位说是参考我的，写过比我写的好太多了，唉，惭愧，惭愧

[http://192.168.11.115:4000/2019/03/13/android-test-monkey-test/](http://192.168.11.115:4000/2019/03/13/android-test-monkey-test/)

